---
title: O contexto e os auxiliares
description: O contexto fornece adicionalmente e frequentemente informação opcional sobre a requisição atual para aplicação.
category: concepts
csb_link_context: https://codesandbox.io/embed/github/nuxt-academy/guides-examples/tree/master/02_concepts/02_context_helpers-context?fontsize=14&hidenavigation=1&theme=dark
csb_link_helpers: https://codesandbox.io/embed/github/nuxt-academy/guides-examples/tree/master/02_concepts/02_context_helpers-helpers?fontsize=14&hidenavigation=1&theme=dark
---
# O contexto e os auxiliares

O contexto fornece **adicionalmente** e frequentemente informação opcional sobre a requisição atual para aplicação.

---

![](/img/docs/context.svg)

O objeto `context` está disponível dentro de funções específicas do Nuxt tais como [`asyncData`](/docs/features/data-fetching#dados-assíncronos), [plugins](/docs/directory-structure/plugins), [middleware](/docs/directory-structure/middleware), e o [nuxtServerInit](/docs/directory-structure/store#a-ação-nuxtServerInit). Ele fornece **adicionalmente** e frequentemente informação opcional sobre a requisição atual para aplicação.

Primeiramente, o contexto é usado para dar acesso à outras partes da aplicação do Nuxt, por exemplo, a memória do Vuex ou a instância subjacente de `connect`. Assim, temos os objetos `req` e `res` dentro do contexto disponível no lado do servidor e o `store` sempre disponível. Agora, temos acesso ao HMR (Módulo de Recarregamento / Substituição Instantânea)

**Todas as chaves do contexto que estão presentes por padrão**

```js
function (context) { // Poderia ser asyncData, nuxtServerInit, ...
  // Sempre disponíveis
  const {
    app,
    store,
    route,
    params,
    query,
    env,
    isDev,
    isHMR,
    redirect,
    error,
    $config
  } = context

  // Disponível apenas no lado do servidor
  if (process.server) {
    const { req, res, beforeNuxtRender } = context
  }

  // Disponível apenas no lado do cliente
  if (process.client) {
    const { from, nuxtState } = context
  }
}
```

::alert{type="warning"}
O _context_ que nós mencionamos aqui não é para ser confundido com o objeto `context` disponível dentro as [Ações do Vuex](https://vuex.vuejs.org/guide/actions.html) ou aquele disponível dentro da função `build.extend` dentro do seu ficheiro `nuxt.config.js`. Eles não estão relacionados um ao outro!
::

Saiba mais sobre as diferentes chaves de contexto dentro do nosso [Glossário do Interior](/docs/internals-glossary/context).

### Usando parâmetros de página para sua consulta de API

O contexto expõe diretamente possíveis parâmetros dinâmicos da rota via `context.params`. No seguinte exemplo, nós chamamos uma API através do módulo `nuxt/http` usando um parâmetro de página dinâmica como parte da URL. Módulos, como o módulo [nuxt/http](https://http.nuxtjs.org/), podem expor suas próprias funções que estão então disponível através do objeto [context.app](/docs/internals-glossary/context#app).

No entanto, nós envolvemos a chamada da API dentro de uma declaração `try/catch` para manipular possíveis erros.

```js{}[pages/posts/_id.vue]
export default {
  async asyncData(context) {
    const id = context.params.id
    try {
      // Usando o módulo `nuxtjs/http` exposto pelo `context.app`
      const post = await context.app.$http.$get(
        `https://api.nuxtjs.dev/posts/${id}`
      )
      return { post }
    } catch (e) {
      context.error(e) // Exibe a página de erro com o erro lançado
    }
  }
}
```

Com o [ES6](https://hacks.mozilla.org/2015/05/es6-in-depth-destructuring/) você pode usar esta sintaxe para desestruturar o seu objeto `context`. Você pode passar os objetos que você quiser para ter acesso e então você pode usar eles dentro do código sem usar a palavra `context`.

```js{}[pages/posts/_id.vue]
export default {
  async asyncData({ params, $http, error }) {
    const id = params.id

    try {
      // Usando o módulo `nuxtjs/http` exposto pelo `context.app`
      const post = await $http.$get(`https://api.nuxtjs.dev/posts/${id}`)
      return { post }
    } catch (e) {
      error(e) // Exibe a página de erro com o erro lançado
    }
  }
}
```

Deseja ao invés disso usar parâmetros de consulta? Você pode então usar [context.query.id](/docs/internals-glossary/context#query).

### Redirecionando os usuários e acessando a memória

Acesso a [memória do Vuex](/docs/directory-structure/store) (quando você tiver definido através do diretório `store`) é também possível através do contexto. Ele fornece um objeto `store` que pode ser tratado como `this.$store` dentro dos componentes de Vue. Além disso, nós usamos o método `redirect`, um auxiliar exposto através do contexto, para redirecionar o usuário no caso de o estado `authenticated` for [falso](https://developer.mozilla.org/en-US/docs/Glossary/Falsy).

```js
export default {
  middleware({ store, redirect }) {
    // recuperando chaves através da desestruturação de objeto
    const isAuthenticated = store.state.authenticated
    if (!isAuthenticated) {
      return redirect('/login')
    }
  }
}
```

::alert{type="next"}
Para mais exemplos sobre [método `redirect`](/docs/internals-glossary/context#redirect), consulte o livro Glossário do Interior.
::

## Os auxiliares

Além dos atalhos dentro do contexto, existem também outros pequenos auxiliares presentes dentro da sua aplicação do Nuxt.

## `$nuxt`: O auxiliar do Nuxt

O `$nuxt` é um auxiliar desenhado para melhorar a experiência do usuário e para ser uma escotilha de fuga em algumas situações. Ele está acessível através do `this.$nuxt` dentro dos componentes de Vue e através `window.$nuxt` mas neste caso no lado do cliente.

### Verificador de conexão

O auxiliar `$nuxt` fornece uma maneira rápida de saber se conexão da internet de um usuário está disponível ou não: Ele expõe os valores booleanos `isOffline` e `isOnline`. Nós podemos usar esses para exibir uma mensagem assim que o usuário estiver offline (por exemplo).

```html{}[layouts/default.vue]
<template>
  <div>
    <div v-if="$nuxt.isOffline">You are offline</div>
    <Nuxt />
  </div>
</template>
```

### Acessando a instância raiz

Além de fornecer funcionalidades de (Experiência de Desenvolvedor / Experiência de Usuário), o auxiliar `$nuxt` também fornece um atalho para a instância raiz da sua aplicação a partir de outro componente. Porém isso não é tudo ─ você pode também acessar o auxiliar `$nuxt` através do `window.$nuxt` o qual pode ser usado como uma escotilha de fuga para conseguir acesso aos métodos do módulo tais como o `$axios` a partir de fora dos seus componentes de Vue. Isto deve ser usado sabiamente e **apenas como último recurso**.

### Atualizando os dados da página

Quando você quiser atualizar a página atual para o usuário, e você não quiser recarregar completamente a página porque você atingiria o servidor novamente e, pelo menos, reiniciaria a aplicação do Nuxt inteira.

Você pode fazer isso, ao usar `this.$nuxt.refresh()`!

```html
<template>
  <div>
    <div>{{ content }}</div>
    <button @click="refresh">Refresh</button>
  </div>
</template>

<script>
  export default {
    asyncData() {
      return { content: 'Created at: ' + new Date() }
    },
    methods: {
      refresh() {
        this.$nuxt.refresh()
      }
    }
  }
</script>
```

#### Controlando a barra de carregamento

Com o `$nuxt`, você pode também controlar programaticamente a barra de carregamento do Nuxt através do `$nuxt.$loading`.

```js
export default {
  mounted() {
    this.$nextTick(() => {
      this.$nuxt.$loading.start()
      setTimeout(() => this.$nuxt.$loading.finish(), 500)
    })
  }
}
```

Leia mais sobre o assunto no capítulo correspondente a [funcionalidade de carregamento](/docs/features/loading).

## O auxiliar onNuxtReady

Se você quiser executar alguns roteiros _depois_ da sua aplicação do Nuxt tiver sido carregada e estiver pronta, você pode usar a função `window.onNuxtReady`. Isto pode ser útil quando você quiser executar uma função no lado do cliente sem aumentar o tempo para interagir do seu sítio.

```js
window.onNuxtReady(() => {
  console.log('Nuxt is ready and mounted')
})
```

## Os auxiliares de process

O Nuxt injeta três valores booleanos (`client`, `server`, e `static`) dentro do seu objeto `process` global os quais ajudarão você a determinar se a sua aplicação foi renderizada no completamente no servidor ou cliente, bem como a verificação para geração de sítio estático.

```html{}[pages/about.vue]
<template>
  <h1>I am rendered on the {{ renderedOn }} side</h1>
</template>

<script>
  export default {
    asyncData() {
      return { renderedOn: process.client ? 'client' : 'server' }
    }
  }
</script>
```

No exemplo, o `renderedOn` avaliará para `'server'` quando estiver usando a renderização no lado do servidor e um usuário acessar a página diretamente. Quando o usuário navegar para página a partir de uma outra parte da aplicação, por exemplo ao clicar sobre um componente `<NuxtLink>`, ele avaliará para `'client'`.
