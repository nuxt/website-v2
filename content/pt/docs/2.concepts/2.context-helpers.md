---
title: O Contexto e os Auxiliares
description: O contexto fornece informações adicionais e muitas vezes opcionais a respeito da requisição atual para a aplicação.
category: concepts
csb_link_context: https://codesandbox.io/embed/github/nuxt-academy/guides-examples/tree/master/02_concepts/02_context_helpers-context?fontsize=14&hidenavigation=1&theme=dark
csb_link_helpers: https://codesandbox.io/embed/github/nuxt-academy/guides-examples/tree/master/02_concepts/02_context_helpers-helpers?fontsize=14&hidenavigation=1&theme=dark
---
# O Contexto e os Auxiliares

O contexto fornece informações **adicionais** e muitas vezes opcionais a respeito da requisição atual para a aplicação.

---

![](/img/docs/context.svg)

O objeto `context` está disponível em funções específicas de Nuxt tais como [`asyncData`](/docs/features/data-fetching#dados-assíncronos), [plugins](/docs/directory-structure/plugins), [middleware](/docs/directory-structure/middleware), e o [nuxtServerInit](/docs/directory-structure/store#a-ação-nuxtServerInit). Ele fornece informações _adicionais_ e muitas vezes opcionais a respeito da requisição atual para a aplicação.

Antes de mais, o contexto é usado para fornecer acesso às outras partes da aplicação de Nuxt, por exemplo a memória de Vuex ou a instância `connect` subjacente. Assim, temos os objetos `req` e `res` no contexto disponível no lado do servidor e `store` sempre disponível. Porém com o tempo, o contexto foi ampliado com muitas outras variáveis e atalhos úteis. Agora temos acesso às funcionalidades de HMR (Hot Module Reload / Replacement; Recarregamento de Módulo Instantâneo / Substituição de Módulo Instantânea) no modo de `desenvolvimento (development)`, a `rota (route)` atual, `parâmetros (params)` da página e a `consulta (query)`, bem como a opção para acessar as variáveis de ambiente através do contexto. Além disso, as funções de módulo e os auxiliares podem ser expostas através do contexto para estarem disponíveis em ambos - lado do cliente e lado do servidor.

**Todas as chaves do contexto que estão presentes por padrão**

```js
function (context) { // Poderia ser asyncData, nuxtServerInit, ...
  // Sempre disponíveis
  const {
    app,
    store,
    route,
    params,
    query,
    env,
    isDev,
    isHMR,
    redirect,
    error,
    $config
  } = context

  // Disponível apenas no lado do servidor
  if (process.server) {
    const { req, res, beforeNuxtRender } = context
  }

  // Disponível apenas no lado do cliente
  if (process.client) {
    const { from, nuxtState } = context
  }
}
```

::alert{type="warning"}
O _contexto_ a que nos referimos aqui não é para ser confundido com o objeto `context` disponível nas [Ações de Vuex](https://vuex.vuejs.org/guide/actions.html) ou aquele disponível na função `build.extend` no teu ficheiro `nuxt.config.js`. Estes não estão relacionados um com o outro!
::

Saiba mais sobre as diferentes chaves de contexto no nosso [Glossário do Interior](/docs/internals-glossary/context).

### Usando parâmetros de página para tua consulta de API

O contexto expõe diretamente os possíveis parâmetros dinâmicos da rota através de `context.params`. No seguinte exemplo, chamamos uma API através do módulo `nuxt/http` usando um parâmetro de página dinâmica como parte da URL. Módulos, como o módulo [nuxt/http](https://http.nuxtjs.org/), podem expor suas próprias funções as quais são então disponibilizadas através do objeto [context.app](/docs/internals-glossary/context#app).

Além disto, envolvemos a chama de API em uma declaração `try/catch` para lidar com potenciais erros. Com a função `context.error`, podemos mostrar diretamente a página de erro da Nuxt e passar o erro ocorrido.

```js{}[pages/posts/_id.vue]
export default {
  async asyncData(context) {
    const id = context.params.id
    try {
      // Usando o módulo `nuxtjs/http` exposto pelo `context.app`
      const post = await context.app.$http.$get(
        `https://api.nuxtjs.dev/posts/${id}`
      )
      return { post }
    } catch (e) {
      context.error(e) // Exibe a página de erro com o erro lançado
    }
  }
}
```

Tu podes usar esta sintaxe da [ES6](https://hacks.mozilla.org/2015/05/es6-in-depth-destructuring/) para desestruturar o teu objeto `context`. Tu podes passar os objetos os quais quiseres ter acesso e a seguir podes usá-los no código sem a necessidade de usar a palavra `context`.

```js{}[pages/posts/_id.vue]
export default {
  async asyncData({ params, $http, error }) {
    const id = params.id

    try {
      // Usando o módulo `nuxtjs/http` exposto pelo `context.app`
      const post = await $http.$get(`https://api.nuxtjs.dev/posts/${id}`)
      return { post }
    } catch (e) {
      error(e) // Exibe a página de erro com o erro lançado
    }
  }
}
```

Queres de preferência usar os parâmetros de consulta? Tu podes então usar [context.query.id](/docs/internals-glossary/context#query).

### Redirecionando utilizadores e acessando a memória

O acesso a [memória da Vuex](/docs/directory-structure/store) (quando a tiveres configurada através do diretório `store`) também é possível através do contexto. Ele fornece um objeto `store` o qual pode ser tratado como `this.$store` dentro dos componentes de Vue. Além disto, usamos o método `redirect`, um auxiliar exposto através do contexto, para redirecionar o utilizador no caso de o estado `authenticated` for [falso](https://developer.mozilla.org/en-US/docs/Glossary/Falsy).

```js
export default {
  middleware({ store, redirect }) {
    // recuperando chaves através da desestruturação de objeto
    const isAuthenticated = store.state.authenticated
    if (!isAuthenticated) {
      return redirect('/login')
    }
  }
}
```

::alert{type="next"}
Consulte o livro do Glossário de Interior para mais exemplos do [método `redirect`](/docs/internals-glossary/context#redirect).
::

## Os Auxiliares

Além dos atalhos dentro do contexto, também existem outros pequenos auxiliares presentes na tua aplicação de Nuxt.

## `$nuxt`: O auxiliar de Nuxt

O `$nuxt` é um auxiliar desenhado para melhorar a experiência do utilizador e para ser uma escotilha de fuga em algumas situações. Ele está acessível através do `this.$nuxt` dentro dos componentes de Vue e através `window.$nuxt` mas neste caso no lado do cliente.

### Verificador de Conexão

O auxiliar `$nuxt` fornece uma maneira rápida de saber se conexão de internet de um utilizador está disponível ou não: Ele expõe os valores booleanos `isOffline` e `isOnline`. Nós podemos usar estes para exibir uma mensagem assim que o utilizador estiver offline (por exemplo).

```html{}[layouts/default.vue]
<template>
  <div>
    <div v-if="$nuxt.isOffline">You are offline</div>
    <Nuxt />
  </div>
</template>
```

### Acessando a instância raiz

Além de fornecer funcionalidades de (Experiência de Programação / Experiência de Utilizador), o auxiliar `$nuxt` também fornece um atalho para a instância raiz da tua aplicação a partir de outro componente. Porém isso não é tudo ─ tu podes também acessar o auxiliar `$nuxt` através do `window.$nuxt` o qual pode ser usado como uma escotilha de fuga para conseguir acesso aos métodos do módulo tais como o `$axios` a partir de fora dos seus componentes de Vue. Isto deve ser usado sabiamente e **apenas como último recurso**.

### Atualizando os dados da página

Quando quiseres atualizar a página atual para o utilizador, e não quiseres recarregar completamente a página porque atingirias o servidor novamente e, pelo menos, reiniciaria a aplicação Nuxt inteira.

Tu podes fazer isso, ao usar `this.$nuxt.refresh()`!

```html
<template>
  <div>
    <div>{{ content }}</div>
    <button @click="refresh">Refresh</button>
  </div>
</template>

<script>
  export default {
    asyncData() {
      return { content: 'Created at: ' + new Date() }
    },
    methods: {
      refresh() {
        this.$nuxt.refresh()
      }
    }
  }
</script>
```

#### Controlando a barra de carregamento

Com o `$nuxt`, podes também controlar programaticamente a barra de carregamento do Nuxt através do `$nuxt.$loading`.

```js
export default {
  mounted() {
    this.$nextTick(() => {
      this.$nuxt.$loading.start()
      setTimeout(() => this.$nuxt.$loading.finish(), 500)
    })
  }
}
```

Leia mais sobre o assunto no capítulo correspondente a [funcionalidade de carregamento](/docs/features/loading).

## O auxiliar onNuxtReady

Se quiseres executar alguns programas _depois_ da tua aplicação Nuxt tiver sido carregada e estiver pronta, podes usar a função `window.onNuxtReady`. Isto pode ser útil quando quiseres executar uma função no lado do cliente sem aumentar o tempo para interagir do seu sítio.

```js
window.onNuxtReady(() => {
  console.log('Nuxt is ready and mounted')
})
```

## Os auxiliares de process

O Nuxt injeta três valores booleanos (`client`, `server`, e `static`) dentro do seu objeto `process` global os quais ajudar-te-ão a determinar se a tua aplicação foi interpretada completamente no servidor ou cliente, bem como a verificação para geração de sítio estático.

```html{}[pages/about.vue]
<template>
  <h1>I am rendered on the {{ renderedOn }} side</h1>
</template>

<script>
  export default {
    asyncData() {
      return { renderedOn: process.client ? 'client' : 'server' }
    }
  }
</script>
```

No exemplo, o `renderedOn` avaliará para `'server'` quando estiveres a usar a interpretação no lado do servidor e um utilizador acessar a página diretamente. Quando o utilizador navegar para página a partir de uma outra parte da aplicação, por exemplo ao clicar sobre um componente `<NuxtLink>`, ele avaliará para `'client'`.
