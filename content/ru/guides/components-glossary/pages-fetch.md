---
title: 'Метод fetch'
description: Метод `fetch` используется для получения данных асинхронно. Он вызывается на стороне сервера во время рендеринга страницы, и на стороне клиента при переходе между страницами.
menu: Метод Fetch
category: components-glossary
position: 0
---

## Nuxt >= 2.12

В Nuxt.js `v2.12` представлен новый хук `fetch` который может вызываться **в любом Vue компоненте**. Вы можете использовать `fetch` каждый раз когда вам необходимо получить данные **асинхронно**. `fetch` вызывается на стороне сервера во время рендеринга страницы, и на стороне клиента при переходе между страницами.

Он позволяет использовать `$fetchState` на уровне компонентов:

- `$fetchState.pending`: `Boolean`, позволяет вам отображать плейсхолдер когда `fetch` вызван _на стороне клиента_.
- `$fetchState.error`: `null` или `Error`, позволяет вам отображать сообщение ошибки.
- `$fetchState.timestamp`: `Integer`, timestamp последнего fetch запроса, может быть полезен при кешировании с использованием `keep-alive`

Если вы хотите вызвать `fetch` метод из вашего шаблона используйте:

```html
<button @click="$fetch">Перезагрузить</button>
```

или метод компонента:

```javascript
// из методов компонента в секции script
export default {
  methods: {
    refresh() {
      this.$fetch()
    }
  }
}
```

Вы можете получить доступ к [контексту](/docs/2.x/internals-glossary/context) внутри fetch хука используя `this.$nuxt.context`.

### Опции

- `fetchOnServer`: `Boolean` или `Function` (по умолчанию: `true`), вызывает `fetch()` при серверном рендеринге страницы
- `fetchKey`: `String` или `Function` (по умолчанию использует ID компонента либо имя компонента), ключ (или функция, которая создает уникальный ключ) который определяет результат fetch запроса данного компонента (доступен в Nux 2.15+) [Больше информации доступно в оригинальном PR](https://github.com/nuxt/nuxt.js/pull/8466).
- `fetchDelay`: `Integer` (по умолчанию: `200`), задаёт минимальное время выполнения в миллисекундах (чтобы избежать мигания экрана при вставке контента скриптом)

При задании `fetchOnServer:false` `fetch` будет вызываться только на стороне клиента, и `$fetchState.pending` будет возвращать `true` при серверном рендеринге компонента.

```html
<script>
  export default {
    data() {
      return {
        posts: []
      }
    },
    async fetch() {
      this.posts = await this.$http.$get('https://api.nuxtjs.dev/posts')
    },
    fetchOnServer: false,
    // Множественные компоненты могут возвращать одинаковый `fetchKey` и Nuxt будет отследивать их по отдельности
    fetchKey: 'site-sidebar',
    // В качестве альтернативы, для большего контроля, может быть передаваться функция с доступом к состоянию компонента
    // Она может быть вызвана в `created` и должна не зависеть от данных получаемых асинхронно
    fetchKey(getCounter) {
      // getCounter метод, который может быть вызван для получения следующего числа в последовательности
      // как часть генерации уникального fetchKey.
      return this.someOtherData + getCounter('sidebar')
    }
  }
</script>
```

<base-alert type="next">
Для подробной информации о методе fetch ознакомьтесь с разделом [data fetching](/docs/2.x/features/data-fetching)
</base-alert>
