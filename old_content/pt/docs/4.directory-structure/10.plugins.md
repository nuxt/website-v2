---
title: O diret√≥rio plugins
navigation.title: plugins
description: O diret√≥rio plugins cont√©m seus plugins escritos em JavaScript que voc√™ deseja executar antes da instancia√ß√£o da raiz da aplica√ß√£o Vue.js.
category: directory-structure
csb_link_plugins_client: https://codesandbox.io/embed/github/nuxt-academy/guides-examples/tree/master/04_directory_structure/12_plugins_client?fontsize=14&hidenavigation=1&theme=dark
csb_link_plugins_external: https://codesandbox.io/embed/github/nuxt-academy/guides-examples/tree/master/04_directory_structure/12_plugins_external?fontsize=14&hidenavigation=1&theme=dark
csb_link_plugins_custom: https://codesandbox.io/embed/github/nuxt-academy/guides-examples/tree/master/04_directory_structure/12_plugins_custom_plugin?fontsize=14&hidenavigation=1&theme=dark
csb_link_plugins_vue: https://codesandbox.io/embed/github/nuxt-academy/guides-examples/tree/master/04_directory_structure/12_plugins_vue?fontsize=14&hidenavigation=1&theme=dark
---
# O diret√≥rio plugins

O diret√≥rio `plugins` cont√©m seus plugins escritos em JavaScript que voc√™ deseja executar antes da instancia√ß√£o da raiz da aplica√ß√£o Vue.js.

---

![](/img/docs/plugins.svg)

Este √© o lugar para adicionar os plugins do Vue e injetar fun√ß√µes ou constantes. Toda vez que voc√™ precisar usar o `Vue.use()`, voc√™ deve criar um ficheiro dentro de `plugins/` e adicionar seu caminho ao `plugins` dentro do `nuxt.config.js`.

## Pacotes externos

Voc√™ pode querer usar pacotes/m√≥dulos externos dentro da sua aplica√ß√£o (um grande exemplo √© o [axios](https://axios.nuxtjs.org/)) para fazer requisi√ß√µes HTTP para ambos servidor e cliente.

Primeiro, instale ele via npm ou yarn.

::code-group
```bash [Yarn]
yarn add @nuxtjs/axios
```
```bash [NPM]
npm install @nuxtjs/axios
```
::

Voc√™ pode configurar por exemplo os intercetores para reagir a poss√≠veis erros da chamadas da sua API atrav√©s da aplica√ß√£o. Dentro deste exemplo n√≥s redirecionamos o usu√°rio para uma p√°gina de erro personalizada chamada desculpa (sorry) quando n√≥s recebemos um estado de erro 500 por parte da nossa API.

```js{}[plugins/axios.js]
export default function ({ $axios, redirect }) {
  $axios.onError(error => {
    if (error.response.status === 500) {
      redirect('/sorry')
    }
  })
}
```

Por √∫ltimo mas n√£o menos importante, adicionar o m√≥dulo e o recentemente criado plugin √† configura√ß√£o do projeto.

```js{}[nuxt.config.js]
module.exports = {
  modules: ['@nuxtjs/axios'],
  plugins: ['~/plugins/axios.js']
}
```

Depois podemos usar ele diretamente dentro do seu componentes de p√°gina:

```js{}[pages/index.vue]
<template>
  <h1>{{ post.title }}</h1>
</template>

<script>
export default {
	async asyncData ({ $axios, params }) {
	  const  post  = await $axios.$get(`https://api.nuxtjs.dev/posts/${params.id}`)
	  return { post }
	}
}
</script>
```

Uma outra maneira de usar o `axios` sem instalar o m√≥dulo √© importando `axios` diretamente dentro da tag `<script>`.

```js{}[pages/index.vue]
<script>
import axios from 'axios'

export default {
	async asyncData ({ params }) {
	  const { data: post }  = await axios.get(`https://api.nuxtjs.dev/posts/${params.id}`)
	  return { post }
	}
}
</script>
```

::alert{type="info"}
Se voc√™ receber um erro _Cannot use import statement outside a module (Voc√™ n√£o pode usar a declara√ß√£o de importa√ß√£o fora de um m√≥dulo)_, voc√™ pode precisar adicionar o seu pacote √† op√ß√£o `build` > `transpile` dentro do `nuxt.config.js` para o carregador do webpack tornar o seu plugin dispon√≠vel.
::

```js{}[nuxt.config.js]
build: {
  // Voc√™ pode estender a configura√ß√£o do webpack aqui
  transpile: ['npm-package-name'],
},
```

## Plugins de Vue

Se voc√™ quiser usar plugins do vue, como [v-tooltip](https://akryum.github.io/v-tooltip) para exibir dicas da ferramenta (tooltips) dentro da sua aplica√ß√£o, n√≥s precisamos configurar o plugin antes do lan√ßamento da aplica√ß√£o.

Primeiro, n√≥s precisamos instalar ele

::code-group
```bash [Yarn]
yarn add v-tooltip
```
```bash [NPM]
npm install v-tooltip
```
::

Depois criamos o ficheiro `plugins/vue-tooltip.js`

```js{}[plugins/vue-tooltip.js]
import Vue from 'vue'
import VTooltip from 'v-tooltip'

Vue.use(VTooltip)
```

### A propriedade plugins

Ent√£o n√≥s adicionamos o caminho do ficheiro dentro a chave `plugins` do nosso `nuxt.config.js`. A propriedade plugins permite voc√™ adicionar plugins do Vue.js √† sua aplica√ß√£o principal. Todos os caminhos definidos dentro da propriedade `plugins` ser√£o importados antes da inicializa√ß√£o da aplica√ß√£o principal.

```js{}[nuxt.config.js]
export default {
  plugins: ['~/plugins/vue-tooltip.js']
}
```

### Plugins do ES6

Se o plugin est√° localizado dentro do `node_modules` e exporta um m√≥dulo ES6, voc√™ pode precisar adicionar ele √† op√ß√£o de constru√ß√£o `transpile`:

```js{}[nuxt.config.js]
module.exports = {
  build: {
    transpile: ['vue-tooltip']
  }
}
```

Voc√™ pode recorrer a documenta√ß√£o da [configura√ß√£o do build](/docs/configuration-glossary/configuration-build#transpile) para saber mais sobre a op√ß√£o build.

## Apenas no lado do cliente ou servidor

Alguns plugins podem funcionar apenas dentro do browser por causa da falta suporte ao SSR.

### Nomear de maneira convencional o plugin

Se √© suposto um plugin ser executado apenas no lado do cliente ou servidor, `.client.js` ou `.server.js` podem ser aplicados como uma extens√£o do ficheiro do plugin. O ficheiro ser√° automaticamente inclu√≠do apenas no respetivo lado (do cliente ou servidor).

```js{}[nuxt.config.js]
export default {
  plugins: [
    '~/plugins/foo.client.js', // apenas no lado do cliente
    '~/plugins/bar.server.js', // apenas no lado do servidor
    '~/plugins/baz.js' // ambos cliente e servidor
  ]
}
```

### A sintaxe de objeto

Voc√™ pode tamb√©m usar a sintaxe de objeto com a propriedade `mode` com o valor (`'client'` ou `'server'`) dento de `plugins`.

```js{}[nuxt.config.js]
export default {
  plugins: [
    { src: '~/plugins/both-sides.js' },
    { src: '~/plugins/client-only.js', mode: 'client' }, // apenas no lado do cliente
    { src: '~/plugins/server-only.js', mode: 'server' } // apenas no lado do servidor
  ]
}
```

## Injetar dentro do `$root` e contexto

Algumas vezes voc√™ deseja tornar as fun√ß√µes ou valores dispon√≠veis ao longo da sua aplica√ß√£o. Voc√™ pode injetar essas vari√°veis dentro das inst√¢ncias do Vue (lado do cliente), o contexto (lado do servidor) e at√© dentro da mem√≥ria do Vuex. √â uma conven√ß√£o prefixar essas fun√ß√µes com um `$`.

O Nuxt fornece a voc√™ uma maneira de fazer isso facilmente com um m√©todo `inject(key, value)`. O inject √© dado como segundo par√¢metro quando exportamos uma fun√ß√£o. O `$` ser√° pr√©-adicionado automaticamente a chave.

::alert{type="info"}
√â importante saber que de todo [ciclo de vida da inst√¢ncia do Vue](https://v2.vuejs.org/v2/guide/instance.html#Lifecycle-Diagram), apenas os gatilhos `beforeCreate` e `created` s√£o chamados ambos, no lado do cliente e no lado do servidor. Todos os outros gatilhos s√£o apenas chamado no lado do cliente.
::

```js{}[plugins/hello.js]
export default ({ app }, inject) => {
  // Injete $hello(msg) dentro do Vue, contexto e mem√≥ria.
  inject('hello', msg => console.log(`Hello ${msg}!`))
}
```

```js{}[nuxt.config.js]
export default {
  plugins: ['~/plugins/hello.js']
}
```

Agora o servi√ßo `$hello` pode ser acessado a partir do `context` e `this` dentro das p√°ginas, componentes, plugins, e a√ß√µes da mem√≥ria.

```js{}[example-component.vue]
export default {
  mounted() {
    this.$hello('mounted')
    // ir√° exibir no terminal 'Hello mounted!'
  },
  asyncData({ app, $hello }) {
    $hello('asyncData')
    // Se estiver usando Nuxt <= 2.12, use üëá
    app.$hello('asyncData')
  }
}
```

```js{}[store/index.js]
export const state = () => ({
  someValue: ''
})

export const actions = {
  setSomeValueToWhatever({ commit }) {
    this.$hello('store action')
    const newValue = 'whatever'
    commit('changeSomeValue', newValue)
  }
}
```

::alert{type="warning"}
N√£o use o `Vue.use()`, `Vue.component()` e globalmente n√£o conecte nada ao Vue **dentro** desta fun√ß√£o, dedicada a inje√ß√£o do Nuxt. Isso causar√° vazamento de mem√≥ria no lado do servidor.
::

## A propriedade extendPlugins

Voc√™ talvez queira estender os plugins ou mudar as ordem dos plugins criada pelo Nuxt. Esta fun√ß√£o aceita um array de objetos de [plugin](/docs/configuration-glossary/configuration-plugins) e deve retornar um array de objetos de plugin.

Exemplo de mudan√ßa da ordem de plugins:

```js{}[nuxt.config.js]
export default {
  extendPlugins(plugins) {
    const pluginIndex = plugins.findIndex(
      ({ src }) => src === '~/plugins/shouldBeFirst.js'
    )
    const shouldBeFirstPlugin = plugins[pluginIndex]

    plugins.splice(pluginIndex, 1)
    plugins.unshift(shouldBeFirstPlugin)

    return plugins
  }
}
```

## Mixins global

Mixins global pode ser facilmente adicionado com plugins do Nuxt mas pode causar problemas e vazamento de mem√≥ria quando n√£o manipulado corretamente. Sempre que voc√™ adicionar um mixin global a sua aplica√ß√£o, voc√™ deve usar um bandeira para evitar registar ele v√°rias vezes:

```js{}[plugins/my-mixin-plugin.js]
import Vue from "vue"

// Certifique-se de pegar um nome √∫nico para a bandeira
// assim ele n√£o ir√° entrar em conflito com qualquer outro mixin.
if (!Vue.__my_mixin__) {
  Vue.__my_mixin__ = true
  Vue.mixin({ ... }) // Depois configure o seu mixin
}
```
